\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{beamerinnerthemeuow}
   [2015/07/18 A Beamer Inner Theme That Matches the UOW Branding Guidelines]
\RequirePackage{calc}
\ifxetex
   \RequirePackage{microtype}
\else
   \RequirePackage[tracking=true]{microtype}
      \newcommand{\allcapsspacing}[1]{\textls*[50]{#1}}%
      \newcommand{\allcaps}[1]{\allcapsspacing{\MakeUppercase{#1}}}%
\fi

\newlength\beamerleftmargin
\setlength\beamerleftmargin{\Gm@lmargin}
\newlength\beamerrightmargin
\setlength\beamerrightmargin{\Gm@rmargin}

\setbeamertemplate{title page}{
\begin{minipage}[t][\paperheight][t]{\@UOWsmallrectangle@width-\beamerleftmargin}
% The basic implimentation here is taken from the metropolis theme by Matthias Vogelgesang,
% of which the author is a contributor
% If the user has set a |titlegraphic|, we set it in a zero-height box so
% it doesn't change the position of other elements.
\ifx\inserttitlegraphic\@empty\else{%
   \vbox to 0pt {
      \vspace*{2em}
      \usebeamercolor[fg]{titlegraphic}%
      \inserttitlegraphic%
   }%
   \nointerlineskip%
}
\fi
\vfill%
% We set the title and subtitle, but only if they are defined by the user.
% If |\subtitle| is empty, for example, it won't leave a blank space on the
% title slide.
\vspace*{0.12\paperheight}
\ifx
   \inserttitle\@empty
\else{%
   \raggedright%
   \linespread{1.0}%
   \usebeamerfont{title}%
   \usebeamercolor[fg]{title}%
   \ifxetex%
      \MakeUppercase{\inserttitle}%
   \else%
      \allcaps{\inserttitle}%
   \fi%
  \par%
}
\fi
\ifx\insertsubtitle\@empty
\else{%
   \usebeamerfont{subtitle}%
   \usebeamercolor[fg]{subtitle}%
   \insertsubtitle%
   \par%
   \vspace*{1em}
}
\fi
%   The date and institute are set after the author, again provided they are
%   nonempty. Note that the default date in \LaTeX{} is |\today|, not |\empty|.
\ifx\insertdate\@empty\else{%
   \usebeamerfont{date}%
   \usebeamercolor[fg]{date}%
   \insertdate%
   \par%
}
\fi
%   Like the title and subtitle, we display the author only when it is defined.
%   But beamer's definition of |\insertauthor| is always nonempty, so we have
%   to test another macro initialized by |\author{...}| to see if the user has
%   defined an author. This solution was suggested by Enrico Gregorio in an
%   answer to \href{https://tex.stackexchange.com/questions/241306/}{this
%   Stack Exchange question}.
\vfill
\ifx\beamer@shortauthor\@empty\else{%
   \usebeamerfont{author}%
   \usebeamercolor[fg]{author}%
   \insertauthor%
   \par%
   \vspace*{0.25em}
}
\fi
\ifx\insertinstitute\@empty\else{%
   \usebeamerfont{institute}%
   \usebeamercolor[fg]{institute}%
   \insertinstitute%
   \par%
}
\fi
\vspace*{\@UOWlargerectangle@height}
\end{minipage}
}

\def\maketitle{%
   \ifbeamer@inframe
      \titlepage
   \else
      \frame[plain]{\titlepage}
   \fi
}

\def\titlepage{%
   \usebeamertemplate{title page}
}

% Textblock settings
\setlength{\parskip}{0.5em}
\linespread{1.15}
% Bullet point styles
\setbeamertemplate{itemize items}{\textbullet}
% Captions
\setbeamertemplate{caption label separator}{: }
\setbeamertemplate{caption}[numbered]
% Footnotes
\setbeamertemplate{footnote}{%
   \parindent 0em\noindent%
   \raggedright
   \usebeamercolor{footnote}\hbox to 0.8em{\hfil\insertfootnotemark}\insertfootnotetext\par%
}

\mode<all>